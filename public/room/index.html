<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="initial-scale=1,  minimum-scale=1, maximum-scale=1, viewport-fit=cover, width=device-width">
  </meta>
  <meta name="apple-mobile-web-app-capable" content="yes">
  </meta>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  </meta>
  <title>FUNCTOR 001 Hyper Room</title>
  <link rel="manifest" href="/room/manifest.json" />
  <link rel="stylesheet" href="/assets/css/room.css">
  </style>
  <script src="/assets/lib/aframe-v1.7.1.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
  <script src="https://unpkg.com/aframe-orbit-controls@1.3.2/dist/aframe-orbit-controls.min.js"></script>
  <script src="/assets/js/pigeon-receiver.js" type="module"></script>
  <script src="/assets/js/aframe-emoji-boid.js" type="module"></script>
  <script src="/assets/js/emoji-starter.js" type="module"></script>
  <script src="/assets/js/peerjs-room.js" type="module"></script>
</head>

<body style="margin : 0px; overflow: hidden;">
  <a-scene background="color: #fff" emoji-starter>

    <a-assets>
      <a-asset-item id="room" src="/assets/gltf/villamoderna.glb"></a-asset-item>
      <a-asset-item id="iphone" src="/assets/gltf/iphonex.glb"></a-asset-item>
      <img id="emoji1" src="/assets/images/emoji1.png" />
      <img id="emoji2" src="/assets/images/emoji2.png" />
      <img id="emoji3" src="/assets/images/emoji3.png" />
      <img id="emoji4" src="/assets/images/emoji4.png" />
      <img id="emoji5" src="/assets/images/emoji5.png" />
    </a-assets>

    <a-entity gltf-model="#room" position="0 1.4 -0.5" rotation="0 -90 0"></a-entity>
    <a-entity gltf-model="#iphone" position="0 2.2 0" scale="0.001 0.001 0.001" pigeon-receiver>
      <a-video src="#remote_video" width="75" height="125" position="0 0 5" color="#fff"></a-video>
    </a-entity>

    <a-entity id="emojiAstage" position="0 1.55 0" animation="property:rotation; dur: 30000; fill: forwards; from: 0, 0, 0; to: 0 360 0; loop: true; easing: linear;startEvents: emojistart;">
      <a-plane src="#emoji1" id="emojiA" height="0.3" width="0.3" position="0 0.2 -1.6" rotation="0 0 0" material="transparent: true; side: double; alphaTest: 0.1;"
        animation="property:position; dur: 12000; fill: forwards; from: 0 0.2 -1.6; to: 0 -0.2 -1.6; loop: true; dir: alternate; easing: easeInOutSine; startEvents: emojistart;"></a-plane>
    </a-entity>

    <a-entity id="emojiBstage" position="0 1.55 0" animation="property:rotation; dur: 45000; fill: forwards; from: 0, 0, 0; to: 0 360 0; loop: true; easing: linear;startEvents: emojistart;">
      <a-plane src="#emoji2" id="emojiB" height="0.4" width="0.4" position="0 0.3 0.8" rotation="0 0 0" material="transparent: true; side: double; alphaTest: 0.1;"
        animation="property:position; dur: 11000; fill: forwards; from: 0 0.3 0.8; to: 0 -0.1 0.8; loop: true; dir: alternate; easing: easeInOutSine; startEvents: emojistart;"></a-plane>
    </a-entity>

    <a-entity id="emojiCstage" position="0 1.55 0" animation="property:rotation; dur: 40000; fill: forwards; from: 0, 0, 0; to: 0 360 0; loop: true; easing: linear;startEvents: emojistart;">
      <a-plane src="#emoji3" id="emojiC" height="0.3" width="0.3" position="0.8 0.4 1.2" rotation="0 0 0" material="transparent: true; side: double; alphaTest: 0.1;"
        animation="property:position; dur: 10000; fill: forwards; from: 0.8 0.4 1.2; to: 0.8 -0.2 1.2; loop: true; dir: alternate; easing: easeInOutSine; startEvents: emojistart;"></a-plane>
    </a-entity>

    <a-entity id="emojiDstage" position="0 1.55 0" animation="property:rotation; dur: 35000; fill: forwards; from: 0, 0, 0; to: 0 360 0; loop: true; easing: linear;startEvents: emojistart;">
      <a-plane src="#emoji4" id="emojiD" height="0.4" width="0.4" position="-0.4 0.1 1.1" rotation="0 0 0" material="transparent: true; side: double; alphaTest: 0.1;"
        animation="property:position; dur: 14000; fill: forwards; from: -0.4 0.1 1.1; to: -0.4 -0.2 1.1; loop: true; dir: alternate; easing: easeInOutSine; startEvents: emojistart;"></a-plane>
    </a-entity>

    <a-entity id="emojiEstage" position="0 1.55 0" animation="property:rotation; dur: 25000; fill: forwards; from: 0, 0, 0; to: 0 360 0; loop: true; easing: linear;startEvents: emojistart;">
      <a-plane src="#emoji5" id="emojiE" height="0.3" width="0.3" position="-0.1 0.7 -1" rotation="0 0 0" material="transparent: true; side: double; alphaTest: 0.1;"
        animation="property:position; dur: 13000; fill: forwards; from: -0.1 0.7 -1; to: -0.1 0.1 -1; loop: true; dir: alternate; easing: easeInOutSine; startEvents: emojistart;"></a-plane>
    </a-entity>

    <a-entity camera look-controls="enabled: false" orbit-controls="target: 0 1.55 0; minDistance: 0.3; maxDistance: 1.2; initialPosition: 1 2 -1; rotateSpeed: 0.5; enablePan: false; autoRotate: true; autoRotateSpeed: 0.1;"></a-entity>
    <video id="remote_video" autoplay></video>
  </a-scene>
  <video id="remote_video" src="/assets/video/black.mp4"></video>
</body>

</html>